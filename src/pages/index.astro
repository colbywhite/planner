---
import Root from "../layout/root.astro";
import BlockDetails from "../components/BlockDetails.astro"
import {BlockService} from "../services/block.service";

const requestedBlockIndex = Number(Astro.url.searchParams.get('block') || '1');
const {block, previousIndex, nextIndex} = await new BlockService(Astro.cookies).getBlockAndTasks(requestedBlockIndex)
---
<Root>
    <main class="grid grid-cols-1 items-center max-w-screen-sm mx-auto p-4">
        <section class="card min-h-96 bg-accent text-accent-content shadow-xl">
            <div class="card-body" hx-target="this">
                <BlockDetails block={block} previous={previousIndex} next={nextIndex}/>
            </div>
        </section>
   </main>
</Root>
